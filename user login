# imports
import hashlib
import pickle

# loading saved UserInfo
with open('UserInfo.pkl', 'rb') as f:
    UserInfo = pickle.load(f)

# asking for login username and password
login_username = input("what is your username?: ")
login_password = input("what is your password?: ")

# converting the string to bytes
encoded_login_username = login_username.encode(encoding='UTF-8', errors='strict')
encoded_login_password = login_password.encode(encoding='UTF-8', errors='strict')

# hashing the login username and password
hashed_login_username = hashlib.blake2b(encoded_login_username).hexdigest()
hashed_login_password = hashlib.blake2b(encoded_login_password).hexdigest()

# defining user number so that it switches users in the for loop
user_number = int(input("what is your user number?: "))

# creating keys variable for the UserInfo dictionary
keys = UserInfo.keys()

# for loop to search through the sub-dictionaries in UserInfo
for keys in UserInfo:
    username = (UserInfo[user_number]['username'])
    password = (UserInfo[user_number]['password'])
if hashed_login_username == username and hashed_login_password == password:
    print("welcome " + login_username)
else:
    print("Hmmm, we didn't recognise that username, password, and user number combination.")
    print("Maybe you typed something incorrectly, or you forgot to create and account")
